<?php require_once("inc/session.php");require_once("inc/user.php");if ($_FILES['file']['error'] > 0) {	if ($_FILES['file']['error'] ==  1 || $_FILES['file']['error'] == 2){		$_SESSION["result"] = "Your profile picture can't be larger than 20 kilobytes.";		header("Location: settings.php");	}	if ($_FILES['file']['error'] == 4){		$_SESSION["result"] = "You didn't select a file.";		header("Location: settings.php");	}	echo "Error: ".$_FILES['file']['error']."<br />";} else {	$validExtensions = array('.jpg', '.jpeg', '.gif', '.png');	$fileExtension = strrchr($_FILES['file']['name'], ".");	$name = "image/user/".$_SESSION["username"].$fileExtension;	if (in_array(strtolower($fileExtension), $validExtensions)) {		if (move_uploaded_file($_FILES['file']['tmp_name'], $name)) {            $customPic = mysql_query("UPDATE users            SET custom_pic = 1            WHERE username = '$_SESSION[username]'");			$_SESSION["result"] = "Your profile picture has been uploaded.";			header("Location: settings.php");		}		switch (strtolower($fileExtension)){			case ".png":			$image = imagecreatefrompng($name);			imagejpeg($image, "image/user/".$_SESSION["username"].".jpg", 70);			imagedestroy($image);			unlink($name);			break;						case ".gif":			$image = imagecreatefromgif($name);			imagejpeg($image, "image/user/".$_SESSION["username"].".jpg", 70);			imagedestroy($image);			unlink($name);			break;						case ".jpeg":			$image = imagecreatefromjpeg($name);			imagejpeg($image, "image/user/".$_SESSION["username"].".jpg", 70);			imagedestroy($image);			unlink($name);			break;						default:			break;		}	} 	else {		$_SESSION["result"] = "You must upload an approved image format.";		header("Location: settings.php");	}}?>